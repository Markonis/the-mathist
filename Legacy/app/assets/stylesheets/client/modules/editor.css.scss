@import "constants";
@import "mixins";
#editor-container {
  overflow-y: hidden;
}

#note {
  background-color: white;
  box-sizing: border-box;
  font-size: 1.1em;
  margin-left: 0.5rem;
  margin-top: 0.5rem;
  padding-left: 0;
  padding-right: 0;
}

#note-title-container {
  margin-right: 20px;
  margin-left: 20px;
}

#note-title {
  background: none;
  border: none;
  border-bottom: 1px solid lightgray;
  border-radius: 0;
  box-sizing: border-box;
  color: $writing-color;
  font-size: 1em;
  margin-bottom: 0.2em;
  outline: none;
  padding-bottom: 0.2em;
  text-align: center;
  width: 100%;
}

#note-body-container {
  @include calc(height, "100% - 4em");
  @include prevent-selection();
  overflow-x: hidden;
  overflow-y: auto;
  padding-left: 20px;
  padding-right: 20px;
  padding-top: 0.5em;
  line-height: 1.3;
}

#note-body {
  min-height: 100%;
}

#note-body .img {
  @include background-pos(0, center);
  margin: 0.5em;
}

#focus-textarea-container {
  height: 0;
  overflow: hidden;
  position: fixed;
  textarea {
    border: 0;
    outline: 0;
  }
}

#note-body .selection {
  position: absolute;
  background: #CEEAFF;
}

.caret {
  border-left: 1px solid gray;
  display: inline-block;
  height: 0.8em;
  margin: 0 0.05em;
  position: relative;
  vertical-align: -0.1em;
}

.caret>.caret-handle {
  font-size: 0.6em;
}

.right.caret {
  float: none;
}

.caret>* {
  font-size: 1rem;
}

.caret-handle {
  @include background-pos(-3*$icon-size, -1*$icon-size);
  left: -$icon-size;
  margin-left: -1px;
  margin-top: 1px;
  top: 100%;
  z-index: 1;
}

.right.caret>.caret-handle {
  left: 0;
  @include background-pos(-4*$icon-size, -1*$icon-size);
}

#writing-toolbar {
  font-family: 'Open Sans', sans-serif;
  margin-left: 0.7em;
  margin-top: 0.9em;
  .btn {
    margin: 0;
    padding: 0.2em 0.7em;
  }
}

#autocomplete {
  cursor: pointer;
  margin-left: 0.1em;
  tr:nth-child(even) {
    background: rgba(0, 0, 0, 0.05);
  }
  tr.chosen {
    background: rgba(0, 0, 0, 0.1);
  }
  td {
    padding: 0.1em 0.5em;
    border: none;
  }
  td>div {
    vertical-align: middle;
  }
  td:first-child {
    font-size: 0.6em;
  }
  td:last-child {
    min-width: 2.5em;
    text-align: right;
  }
}

#new-elements {
  background: #DBF0D0;
  border: 1px solid #B0C7A2;
  border-bottom: none;
  border-right: none;
  border-radius: 2px 0 2px 0;
  bottom: 0;
  display: none;
  right: 0;
}

#writing-tools {
  background: #DBEEFF;
  border: 1px dashed cornflowerblue;
  border-radius: 0 0 2px 2px;
  border-top: none;
  display: none;
  right: -1px;
  top: 100%;
  z-index: 1;
}

.key {
  cursor: pointer;
  text-align: center;
  line-height: 1.4;
  margin: 0.1em;
  min-width: 1.2em;
}

.key>.simple-field,
.key>.complex-field {
  vertical-align: middle;
}

.bordered.key {
  border-radius: 0.3em;
  border: 0.15em solid #E0E0E0;
}

.light.gray.key {
  background: #EEE;
  border-color: #E0E0E0;
  color: $writing-color;
}

.dark.gray.key {
  background: #DDD;
  border-color: #D4D4D4;
  color: $writing-color;
}

.space {
  border-bottom: 1px solid $writing-color;
  border-left: 1px solid $writing-color;
  border-right: 1px solid $writing-color;
  bottom: -0.3em;
  height: 0.2em;
  width: 1em;
}

#letters {
  font-size: 0.85em;
  margin: 0.2em 0;
  margin-right: -1.9em;
}

#letters>div {
  line-height: 1.9;
  margin: 0.15em 0.5%;
  vertical-align: middle;
  width: 8%;
}

#enter>i {
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  transform: rotate(90deg);
}

#backspace>.icon {
  @include background-pos(-6*$icon-size, -$icon-size);
}

#compute {
  padding: 0 0.5em 0 0;
}

#compute>.icon {
  @include background-pos(-7*$icon-size, -$icon-size);
}

#arrows-container {
  line-height: 1.2;
  padding-right: 0.2em;
  width: 4em;
}

#up-arrow {
  @include background-pos(0, 0);
  margin-bottom: -0.4em;
}

#right-arrow {
  @include background-pos(-$icon-size, 0);
}

#down-arrow {
  @include background-pos(-2*$icon-size, 0);
  margin-top: -0.15em;
}

#left-arrow {
  @include background-pos(-3*$icon-size, 0);
}

#radial {
  bottom: 1rem;
  right: 25.5rem;
  span {
    color: $writing-color;
    font-size: 2.5rem;
    font-family: 'Math';
  }
  div {
    border: 1px dashed gray;
    cursor: pointer;
    height: 1rem;
    width: 1rem;
  }
}

#group {
  background: #EEE;
  font-size: 1.2em;
  padding: 0.1em;
}

#group>div {
  margin: 0;
  min-width: 1.8em;
  padding: 0.4em;
}

.new-field {
  color: #0059B9;
}

#select {
  height: 100%;
  left: 0;
  top: 0;
  .handle {
    top: 100%;
    z-index: 2;
  }
  .left.handle {
    @include background-pos(-3*$icon-size, $icon-size);
  }
  .right.handle {
    @include background-pos(-4*$icon-size, $icon-size);
  }
  .highlight {
    background-color: rgba(0, 200, 255, 0.03);
    bottom: 0;
    .bounds {
      background-color: rgba(0, 200, 255, 0.2);
      top: 0;
      width: 100%;
    }
  }
}


/* NEW KEYBOARD */

#toggle-keyboard {
  right: 0.5em;
  bottom: 0.5em;
}

#new-keyboard {
  bottom: 0;
  font-size: 1.2em;
  left: 0;
  width: 100%;
}

#keyboard-switcher>.btn {
  border-bottom: 1px solid lightgray;
  border-right: 1px solid lightgray;
  line-height: 3;
  padding-left: 0.4em;
  padding-right: 0.4em;
}

#keyboard-switcher>.btn:last-child {
  border-bottom: none;
}

#new-keyboard table {
  width: 100%;
}

#new-keyboard>table:first-child tr {
  border-bottom: 1px solid lightgray;
}

#new-keyboard>table:first-child tr:last-child td {
  background-color: #F5F5F5;
  border-right: 1px solid lightgray;
}

#new-keyboard>table:first-child tr:last-child td:last-child {
  border-right: none;
}

#show-keyboard-settings>.icon {
  @include background-pos(-2*$icon-size, $icon-size);
}

#signs {
  height: 10rem;
  margin-bottom: -0.5em;
  overflow-y: auto;
  width: 100%;
}

#signs>div {
  margin-bottom: 1em;
}

#signs>div:last-child {
  margin-bottom: 0;
}

#signs .key {
  min-width: 1.8em;
}


/* EDITOR MODES */

#note {
  @include calc(height, "100% - #{$spacing}");
  @include calc(width, "100% - #{$spacing}");
}

#new-keyboard {
  display: none;
}

#editor-container.with-keyboard {
  #note {
    @include calc(height, "100% - #{$spacing} - 14.7rem");
    @include calc(width, "100% - #{$spacing}");
  }
  #new-keyboard {
    display: block;
  }
}


/* Geogebra */

#geogebra-btn>.img {
  background-image: image-url('client/geogebra.png');
  width: 0.75*$icon-size;
  height: $icon-size;
}

#desmos-btn>.img {
  background-image: image-url('client/desmos.png');
  width: 0.75*$icon-size;
  height: $icon-size;
}

#latex-btn {
  padding: 0.6em 0.2em;
}

#latex-btn>.img {
  background-image: image-url('client/latex.png');
  width: 1.8*$icon-size;
  height: $icon-size;
}

#geogebra-search-tools input,
#geogebra-search-tools .btn {
  line-height: 1.3;
  padding: $input-padding;
}

#geogebra-search-tools .btn {
  padding: $input-padding 1em;
}

#geogebra-search-tools>div:first-child {
  @include column(2/3);
}

#geogebra-search-tools>div:last-child {
  @include column(1/3);
}

#geogebra-paging>div {
  @include column(1/2);
}

.manipulator {
  left: 0;
  height: 100%;
  top: 0;
  width: 100%;
  $handle-size: 0.4em;
  div {
    background: #067dd7;
    height: $handle-size;
    width: $handle-size;
    visibility: hidden;
    border-radius: 0.5 * $handle-size;
  }
  .n-handle,
  .s-handle {
    cursor: ns-resize;
    left: 50%;
    margin-left: -0.5 * $handle-size;
  }
  .n-handle {
    top: -0.5 * $handle-size;
  }
  .s-handle {
    bottom: -0.5 * $handle-size;
  }
  .e-handle,
  .w-handle {
    cursor: ew-resize;
    top: 50%;
    margin-top: -0.5 * $handle-size;
  }
  .e-handle {
    right: -0.5 * $handle-size;
  }
  .w-handle {
    left: -0.5 * $handle-size;
  }
  .sw-handle,
  .nw-handle {
    left: -0.5 * $handle-size;
  }
  .se-handle,
  .ne-handle {
    right: -0.5 * $handle-size;
  }
  .ne-handle,
  .nw-handle {
    top: -0.5 * $handle-size;
  }
  .se-handle,
  .sw-handle {
    bottom: -0.5 * $handle-size;
  }
  .ne-handle,
  .sw-handle {
    cursor: nesw-resize;
  }
  .se-handle,
  .nw-handle {
    cursor: nwse-resize;
  }
}

.active.manipulator,
.manipulator:hover {
  outline: 1px solid #078cf2;
  div {
    visibility: visible;
  }
}

.active.manipulator {
  z-index: 2;
}


/* Print Styles */

@media print {
  #editor-container {
    background: white;
  }
  #editor-container,
  #note,
  #note-body,
  body,
  html {
    height: auto !important;
    overflow: visible;
  }
  .bordered {
    border: none;
  }
  #note-title-container {
    margin: 0 0.8em 1em 0.8em;
  }
  #note-title {
    background: none;
    border: none;
    border-bottom: 1px solid lightgray;
    color: $writing-color;
    font-size: 1.2em;
    outline: none;
    padding-bottom: 0.4em;
    text-align: center;
    width: 100%;
  }
  .page-element-container {
    margin: 0.5em 1em;
    page-break-inside: avoid;
  }
  #editor-container .img {
    -webkit-print-color-adjust: exact;
  }
  .caret,
  .tooltipster-base,
  #new-keyboard,
  #new-elements,
  #writing-tools,
  #drawing-tools,
  #group,
  #autocomplete,
  #toggle-keyboard,
  #note>.delete-note.btn {
    display: none !important;
  }
}
